
<!DOCTYPE html>
<html lang="zh-Hans" class="loading">
<head><meta name="generator" content="Hexo 3.8.0">
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Win10安装CentOS7填坑记 - AIX Zing</title>
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="google" content="notranslate">
    <meta name="keywords" content="Fechin,"> 
    <meta name="description" content="&lt;br/&gt;光荣在于平淡&lt;br/&gt;艰巨在于漫长&lt;br/&gt;&lt;br/&gt;&lt;br/&gt;无论我多早迎接这清晨&lt;br/&gt;在路上&lt;br/&gt;都会有人在&lt;br/&gt;我以为别人还在梦乡&lt;br/&gt;但无论什么时候&lt;br/&gt;这个世界都比我快一步,0x00 血泪！一人装机到深夜淘来一个120G的固态，打算装个CentOS7，玩玩服务器，万万没想到遇到了一个神奇的坑。整到大半夜都没搞定都是因为百度来的东西大部分已经是二手货了，很多操作并不知道为,"> 
    <meta name="author" content="zing"> 
    <link rel="alternative" href="atom.xml" title="AIX Zing" type="application/atom+xml"> 
    <link rel="icon" href="/img/favicon.ico"> 
    
    <link rel="stylesheet" href="/css/diaspora.css">
	<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <script>
         (adsbygoogle = window.adsbygoogle || []).push({
              google_ad_client: "ca-pub-8691406134231910",
              enable_page_level_ads: true
         });
    </script>
    <script async custom-element="amp-auto-ads" src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
    </script>
</head>
</html>
<body class="loading">
    <span id="config-title" style="display:none">AIX Zing</span>
    <div id="loader"></div>
    <div id="single">
    <div id="top" style="display: block;">
    <div class="bar" style="width: 0;"></div>
    <a class="iconfont icon-home image-icon" href="javascript:;" data-url="http://xzing.github.io"></a>
    <div title="播放/暂停" class="iconfont icon-play"></div>
    <h3 class="subtitle">Win10安装CentOS7填坑记</h3>
    <div class="social">
        <div>
            <div class="share">
                <a title="获取二维码" class="iconfont icon-scan" href="javascript:;"></a>
            </div>
            <div id="qr"></div>
        </div>
    </div>
    <div class="scrollbar"></div>
</div>

    <div class="section">
        <div class="article">
    <div class="main">
        <h1 class="title">Win10安装CentOS7填坑记</h1>
        <div class="stuff">
            <span>一月 14, 2017</span>
            
  <ul class="post-tags-list"><li class="post-tags-list-item"><a class="post-tags-list-link" href="/tags/CentOS/">CentOS</a></li><li class="post-tags-list-item"><a class="post-tags-list-link" href="/tags/Win/">Win</a></li><li class="post-tags-list-item"><a class="post-tags-list-link" href="/tags/linux/">linux</a></li><li class="post-tags-list-item"><a class="post-tags-list-link" href="/tags/系统/">系统</a></li></ul>


        </div>
        <div class="content markdown">
            <h2 id="0x00-血泪！一人装机到深夜"><a href="#0x00-血泪！一人装机到深夜" class="headerlink" title="0x00 血泪！一人装机到深夜"></a>0x00 血泪！一人装机到深夜</h2><p>淘来一个120G的固态，打算装个CentOS7，玩玩服务器，万万没想到遇到了一个神奇的坑。整到大半夜都没搞定<br>都是因为百度来的东西大部分已经是二手货了，很多操作并不知道为什么。自己也是棵白菜。唉<br>朕要把这个坑记住，以后以此为鉴。</p>
<h2 id="0x01-准备"><a href="#0x01-准备" class="headerlink" title="0x01 准备"></a>0x01 准备</h2><ul>
<li><strong>硬件</strong> 你需要一个PC或笔记本电脑（Mac建议别装双系统了，蛋疼，还是虚拟机去吧）、一个8GB的U盘，如果还有一台可以做U盘引导的电脑更好，最好是Windows的系统</li>
</ul>
<p><img src="http://upload-images.jianshu.io/upload_images/1112615-5595612452c2483d.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="我的古董"></p>
<ul>
<li><strong>软件</strong>  <a href="https://www.centos.org/download/" target="_blank" rel="noopener">CentOS 7 x86_64的ISO文件</a>和<a href="http://www.laomaotao.net/down/" target="_blank" rel="noopener">老毛桃U盘装机软件最新版</a> </li>
</ul>
<p>ps:老毛桃会被windows误杀，装之前先关闭各种杀毒软件和电脑管家</p>
<h2 id="0x02-第一步：准备制作U盘"><a href="#0x02-第一步：准备制作U盘" class="headerlink" title="0x02 第一步：准备制作U盘"></a>0x02 第一步：准备制作U盘</h2><a id="more"></a>
<p>注意会格式化U盘请，务必将U盘数据做好备份，否则就没了。<br>管理员模式打开老毛桃，开始制作。</p>
<p><img src="http://upload-images.jianshu.io/upload_images/1112615-e30a8e0d48faffa6.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="使用老毛桃制作USB启动盘"></p>
<p><img src="http://upload-images.jianshu.io/upload_images/1112615-e4e36782a4aba6e6.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="点击写入，等待大约2~12分钟，看U盘速度"><br>注意：写入方式：我选择的是USB-HDD+ v2，据说，兼容性更好。其他默认就行！但是建议不要隐藏启动分区。</p>
<p>制作完成之后就可以装机了</p>
<h2 id="0x03-第二步：装机"><a href="#0x03-第二步：装机" class="headerlink" title="0x03 第二步：装机"></a>0x03 第二步：装机</h2><p>这步可以参考百度了，但是百度这个贱人搜出来一大堆比人抄袭的东西，比人的坑也被抄了下来。唉。不多说了下面按照步骤，开始装机</p>
<ul>
<li>选择USB启动，有的电脑是按住F12有的是F10，有的是Delete键，请根据自己的电脑，按键选择boot顺序<br><img src="http://upload-images.jianshu.io/upload_images/1112615-ef5c9ba13ebb3217.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="选择U盘"></li>
</ul>
<p>如果你的U盘制作的没有问题的话，就会进入安装模式</p>
<p><img src="http://upload-images.jianshu.io/upload_images/1112615-c8ce6b5682cff55b.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="界面"></p>
<p><strong>这里有坑！</strong><br>到达这个界面的时候，先直接按enter键，如果运气好的话，会直接进入安装界面，运气不好的话，会找不到U盘挂载。</p>
<p><img src="http://upload-images.jianshu.io/upload_images/1112615-9282f15332802096.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="像这样"></p>
<p>这个时候不要随便改<br><code>vmlinuz initrd=initrd.img inst.stage2=hd:LABEL=CentOS\x207\x20x86_64 quiet</code><br>改为<br><code>vmlinuz initrd=initrd.img inst.stage2=hd:/dev/sdb4 quiet</code><br><strong>这是别人抄的，不能全抄！！！</strong></p>
<h2 id="0x04-正确的填坑方式"><a href="#0x04-正确的填坑方式" class="headerlink" title="0x04 正确的填坑方式"></a>0x04 正确的填坑方式</h2><ul>
<li><strong>1.</strong><br>强制关机！按住电源，直到PC关闭！然后重新启动，进入到下面的界面，立刻按Tab键（有的要按e,总之你看着按吧）<br><img src="http://upload-images.jianshu.io/upload_images/1112615-c8ce6b5682cff55b.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="界面"></li>
</ul>
<p>然后最下面一行字出来了，用笔记下来！</p>
<p><img src="http://upload-images.jianshu.io/upload_images/1112615-b8d102b42cbe6985.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="vmlinuz initrd=initrd.img inst.stage2=hd:LABEL=CentOS\x207\x20x88_64    rd.live.check quiet
"><br>一定记下来！<br>现在先看看我们的U盘在这里叫什么名字，挂载在哪里<br>将下面的文字改成<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vmlinuz initrd=initrd.img linux dd rd.live.check quiet</span><br></pre></td></tr></table></figure></p>
<p><img src="http://upload-images.jianshu.io/upload_images/1112615-5a42ebe5c31d0621.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""><br>会有一个列表，你会看到，一个格式为vfat的磁盘，挂载到sda4上，标签为<code>CentOS 7 x8</code><br>因为U盘是fat格式所以这货是sda4！不是百度到的sdb4！</p>
<p><strong>那我换成sda4就好了啊</strong>，错！万一你重启，U盘挂载到sdb4上，或者sdc4上，你会崩溃的，我就这样折腾到了深夜，简直哔了狗！</p>
<ul>
<li><strong>2.</strong><br>现在记下红框里的一切，我们按住电源键再强制重启到<br><img src="http://upload-images.jianshu.io/upload_images/1112615-c8ce6b5682cff55b.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="界面"><br>按一下Tab键（你看着改）<br>我们开始改最下面一行<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vmlinuz initrd=initrd.img inst.stage2=hd:LABEL=CentOS\x207\x20x86_64   rd.live.check quiet</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>刚刚看到红框里的LABLE是<code>CentOS 7 x8</code>,现在将空格改为<code>\x20</code>，根据你自己的LABLE，看看名字，跟着改。<br>为什么改为<code>\x20</code>？你可以看看Lunix Unicode，ASCII编码,Url转码什么的，就懂了<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vmlinuz initrd=initrd.img inst.stage2=hd:LABEL=CentOS\x207\x20x8  rd.live.check quiet</span><br></pre></td></tr></table></figure></p>
<p>然后回车就可以跳过这个坑了。</p>
<h2 id="0x05-继续安装"><a href="#0x05-继续安装" class="headerlink" title="0x05 继续安装"></a>0x05 继续安装</h2><p>接下来我就不多说了，按照别人博客继续来就行了<br>比如：<a href="http://blog.sina.com.cn/s/blog_135027f480102uyug.html" target="_blank" rel="noopener">http://blog.sina.com.cn/s/blog_135027f480102uyug.html</a><br>为了方便你们阅读，我搬个砖</p>
<blockquote>
<p><strong>2.3、修改后，按Ctrl+x执行修改，正常情况下，将进入安装界面，如下图：</strong><br><img src="http://upload-images.jianshu.io/upload_images/1112615-4317a823071e11c5.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""><br>选择想要安装的语言，点继续，如下图：<br><img src="http://upload-images.jianshu.io/upload_images/1112615-1f44bd5b1717e3f7.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""><br><strong>2.3.1、时区的选择</strong> <br><br>如果你安装的是英文版，需要将时区改为上海<br><br><strong>2.3.2、键盘</strong> <br><br>英文键盘和中文键盘布局是一样的！！<br><br><strong>2.3.3、语言支持</strong><br><br>可同时选择支持多种语言<br><strong>2.3.4、安装源（可以默认不动）</strong><br><br>程序将自动选择，进入可以手动制定，还可以直接指定为网络位置！！<br><br><strong>2.3.5、软件选择（注意）</strong><br><br>进入后，可以看到有多个选项，根据需要选择，如下图：<br><br><img src="http://upload-images.jianshu.io/upload_images/1112615-47b39586461a5717.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""><br><br>注意：<br>默认为最小安装，安装后是没有界面的哦！！！！<br><br><strong>2.3.6、安装位置（重要）</strong><br><br> 这里我没有截图，下图来自网络，与实际有些不同<br><br><img src="http://upload-images.jianshu.io/upload_images/1112615-27a2f33453da82cc.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""><br><br>1、<strong>本地标准磁盘</strong> 项中，应该为 本地磁盘 和 U盘 ，选择本地硬盘<br><br>2、<strong>其他存储选项</strong> 中，选择 我要配置分区<br><br>3、注意： 最下面的 完整磁盘摘要以及引导程序，打开，<br>选择不添加引导（后面再添加），<br><br><em>不知道是我这里的问题还是共性问题，先选择 安装引导 下一步将出错！！！，最后点击完成，进入如下界面</em><br><img src="http://upload-images.jianshu.io/upload_images/1112615-2b87b8ba2e8dcbac.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""><br><strong>注意：</strong><br>这里的分区最好选择 为标准分区。<br>因为：在用grub引导时，无法挂载LVMPV分区，根本不识别！！ <br><br>  <em>最好不要用自动创建</em><br><img src="http://upload-images.jianshu.io/upload_images/1112615-b877544eb23d452b.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""><br>1、点击 + 号，分别添加 swap 和 /  两个分区<br><br>大小 ： swap 一般为内存的两倍；<br>             /  为剩余的所有空间<br><br>这步需要格外注意：<br><br>（1）在选择自动创建分区时，分区信息将不能在更新，（这可能是我自己的问题，等待大家测试）<br><em>完成后，点完成，返回配置摘要界面</em><br><img src="http://upload-images.jianshu.io/upload_images/1112615-5dec763ff017a640.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""><br><img src="http://upload-images.jianshu.io/upload_images/1112615-02263eaf9cb57639.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""><br><br>注意：此时，我们再选择安装位置项，将上面没添加的分区引导一项选上，直接点完成，直到返回配置界面！！<br><br><strong>2.3.6、网络和主机名</strong><br>默认网络是关着的，可以再此处打开<br><br><strong>2.4、最后，点击开始安装，如下：</strong><br><img src="http://upload-images.jianshu.io/upload_images/1112615-252d430e79cac200.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""><br><br>在安装过程中，可以设置 root 密码 和 新的用户 （安装后半部分不能再修改了！！）等待安装即可！！<br><br><em>注意： 安装过程中，如果密码太简单，需要点击两次完成来确认！</em><br><img src="http://upload-images.jianshu.io/upload_images/1112615-f2ca5949e745e768.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""><br><img src="http://upload-images.jianshu.io/upload_images/1112615-d4f513db27f8e347.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""><br><img src="http://upload-images.jianshu.io/upload_images/1112615-735325e67c0e542f.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""><br><br>至此，安装已完成，重启，就剩下引导了！！！！！！！！！！</p>
</blockquote>
<h2 id="0x06-恢复Windows引导-amp-amp-恢复CentOS引导"><a href="#0x06-恢复Windows引导-amp-amp-恢复CentOS引导" class="headerlink" title="0x06 恢复Windows引导&amp;&amp;恢复CentOS引导"></a>0x06 恢复Windows引导&amp;&amp;恢复CentOS引导</h2><ul>
<li>在CentOS中恢复Windows<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># 切换到root 用户</span><br><span class="line">su</span><br><span class="line"># 编辑引导</span><br><span class="line"> vim /etc/grub.d/40_custom</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>在结尾处添加<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">menuentry &quot;Windows&quot; &#123;</span><br><span class="line">         set root=(hd0,1)</span><br><span class="line">         chainloader +1</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>保存 esc，<code>:wq!</code>，<br>编译重新自动生成grub所需要的配置文件<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grub2-mkconfig --output=/boot/grub2/grub.cfg</span><br></pre></td></tr></table></figure></p>
<p>好了，重启就能找到Windows了</p>
<ul>
<li>在Windows中恢复Linux<br>如果启动你只看到Windows，看不到Linux系统的，推荐你使用EasyBCD来恢复启动项</li>
</ul>
<p><img src="http://upload-images.jianshu.io/upload_images/1112615-2c352de9826c0c9b.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>
<p>教程在：<a href="http://www.360doc.com/content/12/0828/15/6140124_232817242.shtml" target="_blank" rel="noopener">http://www.360doc.com/content/12/0828/15/6140124_232817242.shtml</a><br><br>我就不详细说了，目前还没找到其他靠谱的启动项恢复方法，EasyBCD下载地址的话，建议正版，否则的话，小心全家桶。</p>
<p>##0x07参考</p>
<p><br><a href="http://www.voidcn.com/blog/superbfly/article/p-5768790.html" target="_blank" rel="noopener">Win 10 + CentOS 7 双系统安装与CentOS美化小记</a><br><br><a href="http://blog.sina.com.cn/s/blog_135027f480102uyug.html" target="_blank" rel="noopener">Win8.1+CentOS7 双系统 U盘安装</a><br><br><a href="http://www.techweb.com.cn/network/system/2016-12-21/2456741.shtml" target="_blank" rel="noopener">安装 Windows 10 + Centos 7 双系统共存</a><br><br><a href="http://blog.sina.com.cn/s/blog_14a5924d30102w9pc.html" target="_blank" rel="noopener">win7/10+centOS7双系统，默认启动win10</a></p>
<p>文章转载请标明出处！</p>

            <!--[if lt IE 9]><script>document.createElement('audio');</script><![endif]-->
            <audio id="audio" loop="1" preload="auto" controls="controls" data-autoplay="false">
                <source type="audio/mpeg" src="">
            </audio>
            
                <ul id="audio-list" style="display:none">
                    
                        
                            <li title="0" data-url="http://link.hhtjim.com/163/425570952.mp3"></li>
                        
                    
                        
                            <li title="1" data-url="http://link.hhtjim.com/163/425570952.mp3"></li>
                        
                    
                </ul>
            
        </div>
        
    <div id="gitalk-container" class="comment link" data-enable="false" data-ae="false" data-ci="" data-cs="" data-r="" data-o="" data-a="" data-d="false">查看评论</div>


    </div>
    
        <div class="side">
			<ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#0x00-血泪！一人装机到深夜"><span class="toc-number">1.</span> <span class="toc-text">0x00 血泪！一人装机到深夜</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#0x01-准备"><span class="toc-number">2.</span> <span class="toc-text">0x01 准备</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#0x02-第一步：准备制作U盘"><span class="toc-number">3.</span> <span class="toc-text">0x02 第一步：准备制作U盘</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#0x03-第二步：装机"><span class="toc-number">4.</span> <span class="toc-text">0x03 第二步：装机</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#0x04-正确的填坑方式"><span class="toc-number">5.</span> <span class="toc-text">0x04 正确的填坑方式</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#0x05-继续安装"><span class="toc-number">6.</span> <span class="toc-text">0x05 继续安装</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#0x06-恢复Windows引导-amp-amp-恢复CentOS引导"><span class="toc-number">7.</span> <span class="toc-text">0x06 恢复Windows引导&amp;&amp;恢复CentOS引导</span></a></li></ol>	
        </div>
    
</div>


    </div>
</div>
</body>

<script src="//lib.baomitu.com/jquery/1.8.3/jquery.min.js"></script>
<script src="/js/plugin.js"></script>
<script src="/js/typed.js"></script>
<script src="/js/diaspora.js"></script>
<link rel="stylesheet" href="/photoswipe/photoswipe.css">
<link rel="stylesheet" href="/photoswipe/default-skin/default-skin.css">
<script src="/photoswipe/photoswipe.min.js"></script>
<script src="/photoswipe/photoswipe-ui-default.min.js"></script>

<!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">
    <!-- Background of PhotoSwipe. 
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>
    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">
        <!-- Container that holds slides. 
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>
        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">
            <div class="pswp__top-bar">
                <!--  Controls are self-explanatory. Order can be changed. -->
                <div class="pswp__counter"></div>
                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
                <button class="pswp__button pswp__button--share" title="Share"></button>
                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>
                <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                      <div class="pswp__preloader__cut">
                        <div class="pswp__preloader__donut"></div>
                      </div>
                    </div>
                </div>
            </div>
            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div> 
            </div>
            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>
            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>
            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>
        </div>
    </div>
</div>






</html>
